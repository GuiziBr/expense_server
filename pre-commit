#!/bin/sh

# Capture the state of the working directory before the build
before_build=$(git ls-files -o --exclude-standard)

# Run the build command
echo "Building project..."
npm run build  # or yarn build

# Check if the build was successful
if [ $? -ne 0 ]; then
  echo "Build failed. Proceeding with commit."
  exit 0
fi

# Capture the state of the working directory after the build
after_build=$(git ls-files -o --exclude-standard)

# Compare the state before and after the build to check for new unstaged files
if [ "$before_build" != "$after_build" ]; then
  echo "Warning: New unstaged files detected after build. Proceeding with commit."
fi

echo "Build successful. Proceeding with commit."
